version: 1.0.{build}
configuration: Release
platform: Any CPU
init:
- ps: 
environment:
  github_access_token:
    secure: 94067646bdafff050af9fbb492c5c6733a9f77c2
  
before_build:
    - git config --global user.name "bianliu1013"
    - git config --global user.email "bianliu1013@163.com"
    - git config --global credential.helper store
    - git config core.safecrlf false
    - ps: ac "$env:USERPROFILE\.git-credentials" "https://$($env:github_access_token):x-oauth-basic@github.com`n"
    
build:
  project: appveyorTest.sln
  verbosity: minimal
  
after_build:
- cmd: >-
    git add -A

    git diff --quiet --exit-code --cached || git commit --author="bianliu1013 <bianliu1013@163.com>" -m "Update azure powershell docs." && git push origin master

artifacts:
- path: bin/release
  name: bin
  
deploy:
- provider: GitHub
  auth_token:
    secure: OR40NUY6q9C3lgW6SIRjfx9lSkWfomfATb9GK0die2CG/4w7ckPVSMJZVCsKTEOq
  artifact: bin
 